/*=========================================================================
|| FILE: Flex grid core
=========================================================================*/

/**
  * Default grid style
**/

.row {
    display: flex;
    flex-wrap: wrap;
    flex-direction: row;
    position: relative;

    & > * {
        flex-grow: 0;
        flex-shrink: 0;
        height: auto !important;
        min-height: 1px;
        position: relative;
        flex-direction: column;
        display: flex;

        & > * {
            flex: 1 1 auto;
        }
    }

}

/**
  * Addon row grid style for columns inside
  * center, v-center, h-center
**/

.row {
    &-space {
        margin: 0 0 -1.25% -1.25%;
        & > * {
            padding: 0 0 1.25% 1.25%;
        }
    }
    &-responsive {
        flex-wrap: nowrap;
        overflow: hidden;
    }
    // Vertical & horizontal center
    &-center {
        &>* {
            align-items: center;
            justify-content: center;
        }
    } 
    // Vertical center
    &-v-center, &-y-center {
        &>* {
            align-items: center;
        }
    } 
    // Horizontal center
    &-h-center, &-x-center {
        &>* {
            justify-content: center;
        }
    }
}

/**
  * Row responsive style
**/

.responsive({
    flex-direction: row-reverse;
});

/**
  * Addon col grid style
  * center, v-center, h-center
**/

.col {

    flex: 1 1 1px !important;

    &-static {
        flex-grow: 0;
        flex-shrink: 0;
    }
    &-responsive {
        flex: 1 1 auto !important;
    }

    // Vertical & horizontal center
    &-center {
        align-items: center;
        justify-content: center;
    } 
    // Vertical center
    &-v {
        &-center {
            align-items: center;
        }
    } 
    // Horizontal center
    &-h {
        &-center {
            justify-content: center;
        }
    }

    &-absolute {
        position: absolute;
        top: 0;
        left: 0;
    }
}

/**
 * Grid generator
 */

/* Default size */
.loop(@grid-count, {
    .col-@{value} {
        flex-basis: 100%/(@grid-count / @value);
        max-width: 100%/(@grid-count / @value);
    }
    & when not (@value = @grid-count) {
        .pull-@{value} {
            right: 100%/(@grid-count / @value) !important;
        }
        .push-@{value} {
            left: 100%/(@grid-count / @value) !important;
        }
        .order-@{value} {
            order: @value;
        }
    }
});

/* Responsive size */
.responsive({

    .gridLoop(@i: 0) when (@i =< @grid-count) {
        
        .@{shortcode}_col-@{i} {
            flex-basis: 100%/(@grid-count / @i);
            max-width: 100%/(@grid-count / @i);
        }

        & when not (@value = @grid-count) {
            .@{shortcode}_pull-@{i} {
                right: 100%/(@grid-count / @i) !important;
            }
            .@{shortcode}_push-@{i} {
                left: 100%/(@grid-count / @i) !important;
            }
            .@{shortcode}_order-@{i} {
                order: @i;
            }
        }

        .gridLoop(@i + 1);
    }
    .gridLoop();

});